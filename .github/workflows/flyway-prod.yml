# name: Flyway â€” Production

# on:
#   workflow_dispatch:
#   push:
#     branches:
#       - main

# jobs:
#   migrate:
#     runs-on: ubuntu-latest
#     environment: prod
#     env:
#       DB_HOST: ${{ secrets.PROD_DB_HOST }}
#       DB_PORT: ${{ secrets.PROD_DB_PORT }}
#       DB_USER: ${{ secrets.PROD_DB_USER }}
#       DB_PASS: ${{ secrets.PROD_DB_PASS }}
#       DB_NAME: ${{ secrets.PROD_DB_NAME }}
#       DB_SCHEMA: ${{ secrets.PROD_DB_SCHEMA }}   # optional

#     steps:
#       - name: Checkout code
#         uses: actions/checkout@v4

#       - name: Set up Java
#         uses: actions/setup-java@v4
#         with:
#           distribution: 'temurin'
#           java-version: '17'

#       - name: Set up Flyway CLI
#         uses: red-gate/setup-flyway@v1
#         with:
#           version: '11.15.0'
#           architecture: 'java'
#           edition: 'community'

#       - name: Run Flyway migrations
#         run: flyway -configFiles=db/flyway/conf/flyway_prod.conf migrate